document.addEventListener("DOMContentLoaded",function(){var e=function(){function e(e){n(),e?q=c(E):(r(),E=c(q)),t()}function t(){i(),a(),d(),l()}function n(){q=[],T=0,h.innerHTML="",f()}function r(){for(var e=0;e<S;e++)q.push(e);q.sort(function(){return p(0,S)})}function c(e){return e.slice()}function i(e){L=e?e:q.indexOf(0)}function a(){for(var e=document.createDocumentFragment(),t=0;t<S;t++){var n=document.createElement("span");n.innerHTML=q[t],n.className="item",n.setAttribute("data-index",t),t===L&&(n.className="item -empty"),e.appendChild(n)}h.appendChild(e)}function o(e){var t=q.splice(e,1,q[L]);q.splice(L,1,t[0])}function u(){var e,t=!1,n=S-1;for(e=1;e<n;e++){if(!(0===q[n]&&q[e]>q[e-1])){t=!1;break}t=!0}return!!t}function s(e){var t=Math.sqrt(S);return e===L+1||e===L-1||e===L+t||e===L-t}function d(){g.innerHTML=T}function l(){M.innerHTML=v(j)+":"+v(z)}function f(){clearInterval(y),j=0,z=0}function m(){var e=document.createElement("div");e.className="message",e.innerHTML="Congratulations! You have successfully finished the puzzle!",h.appendChild(e),setTimeout(function(){h.removeChild(e)},3e3)}function v(e){return(e<10?"0":"")+e}function p(e,t){return Math.floor(Math.random()*(t-e))+e}var L,y,h,M,g,q=[],E=[],S=16,T=0,j=0,z=0;return{init:function(){h=document.querySelector(".js-puzzle-container"),M=document.querySelector(".js-time-counter"),g=document.querySelector(".js-step-counter");var t=document.querySelector(".js-restart-game"),n=document.querySelector(".js-new-game"),r=document.querySelector(".js-puzzle-types");e(),h.addEventListener("click",function(e){var t=e.target,n=parseInt(t.getAttribute("data-index"));s(n)&&(o(n),i(n),T++,1===T&&(y=setInterval(function(){z++,z%60||(z=0,j++),l()},1e3)),h.innerHTML="",a(),d(),u()&&(f(),m()))}),t.addEventListener("click",function(){e(!0)}),n.addEventListener("click",function(){e()}),r.addEventListener("click",function(t){var n=t.target,r=n.classList,c=parseInt(n.getAttribute("data-type"));r.contains("-selected")||(n.parentNode.querySelector(".type.-selected").classList.remove("-selected"),r.add("-selected"),h.classList.remove("-type"+S),h.classList.add("-type"+c),S=c,e())})}}}();e.init()});